# Get a Fastify server running

## Plan

-  Build a server for Fastify and accept HTTP calls
-  Use Postgres in a container for Prisma
   -  Need a Docker setup for this; use `docker-compose` and include adminer
-  See log output that shows linebacker is handling them correctly

## PostgreSQL container

-  Pulled docker setup from another project I have that uses Postgres and adminer
-  Added environment variables to env/dev.env
-  `sudo docker-compose -f docker-compose/dev.env up`
-  Confirm I can connect adminer to the pg instance

## Connect Prisma to Postgres

-  Upgraded Prisma to 4.x
   -  After reviewing upgrade guide, I shouldn't have any issues, but we'll see
-  Prisma requires an environment variable with the Postgres connection string
   -  Added to protected env file
-  Prisma wants the environment file in specific (unprotected) places, so add `**/*.env` to `.gitignore`
-  `npx prisma generate` to create the client
-  `npx prisma migrate dev --name init` to generate the initial migration
-  See the pg database now has the tables

## Ensure Prisma upgrade didn't break anything (tests still pass)

-  Tests use a mock Prisma instance, so in theory, may break if Prisma isn't happy (or maybe not, but we'll run them anyway)
-  All pass, so if anything is broken, it isn't obvious yet

**COMMIT: 7.1.1 - CHORE: set up Postgres; get Prisma talking to it; use Prisma to generate the db**
