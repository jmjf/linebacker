# Add dependency status

For `readyz`, if a critical dependency is unavailable, the application isn't ready to accept requests.

-  The database is the only critical dependency because we must be able to write the request to it

For `healthz`, report connectivity status of all dependencies (database, queue)

-  Don't bother testing auth service because
   -  If it gets this far, auth is almost certainly working
   -  Caching authN/authZ data means we may accept requests from some callers but not others, even if the auth service is unavailable now

Dependencies may vary based on infrastructure choices, so pass dependency checks to the build function.

## Add database check to readyz, return 500 if database isn't available

Pass an array of `readyz` dependencies containing an object `{ depName: string, depCheckFunction: () => Promise<Result<boolean, Error>>}`.

Iterate the array and call the functions. If any returns an error respond 500.

**COMMIT: FEAT: add dependency check to readyz so it can return 500 if any readiness dependency is not responding**
