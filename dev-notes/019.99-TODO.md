# TODOs for return-to-bullmq

-  Add event and worker for `Allowed` and hook it up

-  Think about how to organize
   -  Event bus is now more generic consider move to `infrastructure` or `common/adapters`
   -  Should the queue adapter own all the queues and look them up?
      -  Might enable pausing, etc., if queue operations fail due to connect errors
      -  Could look up based on event name and avoid hardcoding name in events
   -  Can I make the worker app generic with some kind of parameter that controls what it creates and runs?
-  Start move to alternate configuration that will let you instantiate a single config object for all applications
   -  Supports configuration values below and idea that the event bus knows how to map events to queues
-  Configuration values for
   -  [x] Queue names are hard coded in use cases (event knows the topic)
   -  Queue settings are hard coded in `publish`; retry count should be large
   -  Custom backoff policy that increments to a max and then stays at that max
-  [x] Currently, the event bus is specific to a module (backup request); make events know how to ser/de themselves
   -  Plan outlined in the Kafka branch, I think
-  Add better data checks and tests in Receive use case to reduce risk of thrown errors if data is missing
-  Move event create into `AggregateRoot` maybe (???)
-  Consider how to put `domainEvent` in `IEventBusEvent` and override locally
-  Consider pausing workers when a dependency is down
   -  Worker needs to know which services it cares about and how to check availability
   -  Needs a simple way to keep track of service availability and update when it fails
