# Error types
Add error types and expand `Response` left options to include them for all domain entities/aggregates.

I want to return an error object with a message and an optional object containing data about the error.

Looking more closely at Stemmler's `Guard` behavior, I see a need to make some changes to be more like his definition.

## Make Either clearer
[x] Rename types on `Either` to make them easier to read. L -> LeftType; R -> RightType

**COMMIT: 3.1.7.1 - REFACTOR: Rename types on Either to be clearer**

## Define base Error classes
What needs to go into these classes?

I want to include a result code of some kind to better support analysis. Would that be in errors or in `Result`?
* If in `Result` does it have any value for anything that isn't a failure?
  * Probably not. So could be defined for the base error and returned in the error value.
* Are error messages the same for every instance of the same error?
  * Yes, if errors are properly specific, so make them specific.
* How do I want to group errors?
  * Stemmler does it by use case (he generates all errors from use cases; failures in entities are `Result`s).
  * Some errors seem to apply to several use case--backup request not found, for example.
  * It would be useful to know what is causing the error (check allowed? send? reply?)

A little more research shows Node's base `Error` class probably has most of what I want (`code` ([kind of error](https://nodejs.org/api/errors.html#nodejs-error-codes)), `message` (text passed), `stack` (stack trace)). Stemmler defines an interface for his base errors and loses the Node class's values. I want `name` (`this.constructor.name`) if it isn't already there. One example I liked had a `cause` for validation errors--`message` has a description of the error and `cause` is the value that caused the error.

[x] Find what's in errors by default
   * throw an `Error` and `console.log()` it
   * throw a `TypeError` and `console.log()` it
   * subclass `Error` to `TestError`, with a `cause`, throw and `console.log()` it

### What I learned
* The base error includes no keys and no members
* `console.log(e)` prints the error name (Error, TypeError, CustomError1, CustomError2), the message and a stack trace
* `e.toString()` returns the error name + message (no stack trace)
* `name`, `message`, and `stack` are set for all errors, but don't show up in keys or `JSON.stringify()` unless explicitly declared on the error (requires custom error)
* `code` seems to be `undefined` for tested types, may be set for `SystemError`, which defines it
* For Node errors, `e.name` returns the error's type (Error, TypeError, etc.)
* But for custom errors, `e.name` returns the supertype's name unless set in the constructor
* For all errors, `e.message` returns the message unless the constructor explicitly changes it
* Passing an object for `message` requires `JSON.stringify()` to make it readable.
  * Otherwise, only see `[object Object]` output.
  * The object appears in the default `console.log(e)` output as the message.
* `JSON.stringify()` returns empty for Node errors, the custom values (including custom parents) for custom errors

### Conclusions
* `class BaseError extends Error`
* Include and set
  * `name` (identify the type of the error, set in constructor to ensure it's the right value)
  * `message` (error message, if an object, `JSON.stringify()` it)
  * optional `cause` (value or whatever caused the error, probably validation errors only)
  * optional `code` maybe (`name` is probably adequate)

**COMMIT: 3.1.7.2 - RESEARCH: default error behavior**

[] Define `BaseError` based on findings and conclusions above
[] Identify a couple of custom errors for a use case, define and implement them
   * May require changes to `Guard` to include the `argName` for `againstNullOrUndefinedBulk()` to include value in `cause`
[] Ensure tests test errors properly

## Enhance Guard
[] Define `GuardResponse` type (string)
[] Return `Result<GuardResponse>` from guards
[] Refactor code to work with changes

I'm debating whether string is the right type, but I'm not sure why it wouldn't be (yet), so I'll go with it for now.

**COMMIT: 3.1.7.? - REFACTOR: Guard responses and code that uses them**